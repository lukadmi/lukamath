import{c as y,r as v,x as U,u as T,j as e,H as O,L as V,B as u,C as H,e as W,f as D}from"./index-DKjY2bf7.js";import{I as d}from"./input-DYYZNWvm.js";import{S as G,a as J,b as $,c as Y,d as w}from"./select-Cul7_U12.js";import{u as L,z as t,t as k}from"./index-C2yVVeig.js";import{F as z,a as o,b as l,c as i,d as c,e as m}from"./form-CkwWxgZr.js";import{u as M}from"./index-mrbeaKlW.js";import{A as Z}from"./arrow-left-BWIihaGN.js";import{C as K}from"./calculator-CBR4cIhQ.js";import{M as I}from"./mail-w4lQLUox.js";import{U as Q}from"./user-EK2jTh-O.js";import{P as X}from"./phone-0cNnl2OF.js";import"./label-BMsvFg_p.js";import"./utils-km2FGkQ4.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=y("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=y("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b=y("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),_={en:{signIn:"Sign In",register:"Create Account",email:"Email Address",password:"Password",confirmPassword:"Confirm Password",fullName:"Full Name",phone:"Phone Number",mathLevel:"Math Level",middleSchool:"Middle School (Grades 6-8)",highSchool:"High School (Grades 9-12)",university:"University Level",satAct:"SAT/ACT Prep",signInButton:"Sign In",registerButton:"Create Account",forgotPassword:"Forgot Password?",noAccount:"Don't have an account?",haveAccount:"Already have an account?",signUp:"Sign Up",backToLanguage:"Back to Language Selection",loading:"Loading...",errors:{emailRequired:"Email is required",emailInvalid:"Please enter a valid email",passwordRequired:"Password is required",passwordMin:"Password must be at least 8 characters",passwordMatch:"Passwords must match",nameRequired:"Full name is required",mathLevelRequired:"Please select your math level"},success:{accountCreated:"Account created successfully!",signedIn:"Signed in successfully!"}},hr:{signIn:"Prijavite se",register:"Stvorite račun",email:"Email adresa",password:"Lozinka",confirmPassword:"Potvrdite lozinku",fullName:"Puno ime",phone:"Broj telefona",mathLevel:"Razina matematike",middleSchool:"Osnovna škola (5.-8. razred)",highSchool:"Srednja škola (1.-4. razred)",university:"Sveučilišna razina",satAct:"Priprema za državnu maturu",signInButton:"Prijavite se",registerButton:"Stvorite račun",forgotPassword:"Zaboravili ste lozinku?",noAccount:"Nemate račun?",haveAccount:"Već imate račun?",signUp:"Registrirajte se",backToLanguage:"Povratak na odabir jezika",loading:"Učitavanje...",errors:{emailRequired:"Email je obavezan",emailInvalid:"Molimo unesite valjani email",passwordRequired:"Lozinka je obavezna",passwordMin:"Lozinka mora imati najmanje 8 znakova",passwordMatch:"Lozinke se moraju poklapati",nameRequired:"Puno ime je obavezno",mathLevelRequired:"Molimo odaberite vašu razinu matematike"},success:{accountCreated:"Račun je uspješno stvoren!",signedIn:"Uspješno ste se prijavili!"}}},ee=t.object({email:t.string().email(),password:t.string().min(8)}),se=t.object({fullName:t.string().min(1),email:t.string().email(),password:t.string().min(8),confirmPassword:t.string().min(8),phone:t.string().optional(),mathLevel:t.string().min(1)}).refine(n=>n.password===n.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function pe(){const[n,S]=v.useState("login"),[h,P]=v.useState(!1),[p,F]=v.useState("en"),[,E]=U(),{toast:j}=T();v.useEffect(()=>{const x=new URLSearchParams(window.location.search).get("lang"),B=localStorage.getItem("pwa-language");F(x||B||"en")},[]);const a=_[p],g=L({resolver:k(ee),defaultValues:{email:"",password:""}}),r=L({resolver:k(se),defaultValues:{fullName:"",email:"",password:"",confirmPassword:"",phone:"",mathLevel:""}}),f=M({mutationFn:async s=>{const x=await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s),credentials:"include"});if(!x.ok)throw new Error("Login failed");return x.json()},onSuccess:()=>{j({title:a.success.signedIn,description:"Welcome to LukaMath!"}),E(`/pwa/dashboard?lang=${p}`)},onError:()=>{j({title:"Error",description:"Invalid email or password",variant:"destructive"})}}),N=M({mutationFn:async s=>(await D("POST","/api/students",{name:s.fullName,email:s.email,password:s.password,phone:s.phone,mathLevel:s.mathLevel,language:p})).json(),onSuccess:()=>{j({title:a.success.accountCreated,description:"You can now sign in to your account"}),S("login")},onError:()=>{j({title:"Error",description:"Failed to create account. Please try again.",variant:"destructive"})}}),R=s=>{f.mutate(s)},q=s=>{N.mutate(s)};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-white",children:[e.jsxs(O,{children:[e.jsxs("title",{children:[n==="login"?a.signIn:a.register," - LukaMath Student App"]}),e.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"}),e.jsx("meta",{name:"apple-mobile-web-app-capable",content:"yes"})]}),e.jsx("header",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-md mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(V,{href:"/pwa",children:e.jsx(u,{variant:"ghost",size:"sm",className:"mr-3",children:e.jsx(Z,{className:"w-4 h-4"})})}),e.jsx(K,{className:"w-6 h-6 text-blue-600 mr-2"}),e.jsx("h1",{className:"text-xl font-bold text-slate-800",children:"LukaMath"})]})})}),e.jsxs("main",{className:"max-w-md mx-auto px-4 py-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:n==="login"?a.signIn:a.register}),e.jsx("p",{className:"text-slate-600",children:n==="login"?"Welcome back to your math learning journey":"Start your personalized math learning journey"})]}),e.jsx(H,{children:e.jsxs(W,{className:"pt-6",children:[n==="login"?e.jsx(z,{...g,children:e.jsxs("form",{onSubmit:g.handleSubmit(R),className:"space-y-4",children:[e.jsx(o,{control:g.control,name:"email",render:({field:s})=>e.jsxs(l,{children:[e.jsx(i,{children:a.email}),e.jsx(c,{children:e.jsxs("div",{className:"relative",children:[e.jsx(I,{className:"absolute left-3 top-3 h-4 w-4 text-slate-400"}),e.jsx(d,{...s,type:"email",className:"pl-10",placeholder:"student@example.com"})]})}),e.jsx(m,{})]})}),e.jsx(o,{control:g.control,name:"password",render:({field:s})=>e.jsxs(l,{children:[e.jsx(i,{children:a.password}),e.jsx(c,{children:e.jsxs("div",{className:"relative",children:[e.jsx(b,{className:"absolute left-3 top-3 h-4 w-4 text-slate-400"}),e.jsx(d,{...s,type:h?"text":"password",className:"pl-10 pr-10",placeholder:"••••••••"}),e.jsx(u,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>P(!h),children:h?e.jsx(A,{className:"h-4 w-4"}):e.jsx(C,{className:"h-4 w-4"})})]})}),e.jsx(m,{})]})}),e.jsx(u,{type:"submit",className:"w-full",disabled:f.isPending,children:f.isPending?a.loading:a.signInButton})]})}):e.jsx(z,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(q),className:"space-y-4",children:[e.jsx(o,{control:r.control,name:"fullName",render:({field:s})=>e.jsxs(l,{children:[e.jsx(i,{children:a.fullName}),e.jsx(c,{children:e.jsxs("div",{className:"relative",children:[e.jsx(Q,{className:"absolute left-3 top-3 h-4 w-4 text-slate-400"}),e.jsx(d,{...s,className:"pl-10",placeholder:"John Doe"})]})}),e.jsx(m,{})]})}),e.jsx(o,{control:r.control,name:"email",render:({field:s})=>e.jsxs(l,{children:[e.jsx(i,{children:a.email}),e.jsx(c,{children:e.jsxs("div",{className:"relative",children:[e.jsx(I,{className:"absolute left-3 top-3 h-4 w-4 text-slate-400"}),e.jsx(d,{...s,type:"email",className:"pl-10",placeholder:"student@example.com"})]})}),e.jsx(m,{})]})}),e.jsx(o,{control:r.control,name:"phone",render:({field:s})=>e.jsxs(l,{children:[e.jsxs(i,{children:[a.phone," (",p==="en"?"Optional":"Neobavezno",")"]}),e.jsx(c,{children:e.jsxs("div",{className:"relative",children:[e.jsx(X,{className:"absolute left-3 top-3 h-4 w-4 text-slate-400"}),e.jsx(d,{...s,type:"tel",className:"pl-10",placeholder:"+1 (555) 123-4567"})]})}),e.jsx(m,{})]})}),e.jsx(o,{control:r.control,name:"mathLevel",render:({field:s})=>e.jsxs(l,{children:[e.jsx(i,{children:a.mathLevel}),e.jsxs(G,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(c,{children:e.jsx(J,{children:e.jsx($,{placeholder:a.mathLevel})})}),e.jsxs(Y,{children:[e.jsx(w,{value:"middle-school",children:a.middleSchool}),e.jsx(w,{value:"high-school",children:a.highSchool}),e.jsx(w,{value:"university",children:a.university}),e.jsx(w,{value:"sat-act",children:a.satAct})]})]}),e.jsx(m,{})]})}),e.jsx(o,{control:r.control,name:"password",render:({field:s})=>e.jsxs(l,{children:[e.jsx(i,{children:a.password}),e.jsx(c,{children:e.jsxs("div",{className:"relative",children:[e.jsx(b,{className:"absolute left-3 top-3 h-4 w-4 text-slate-400"}),e.jsx(d,{...s,type:h?"text":"password",className:"pl-10 pr-10",placeholder:"••••••••"}),e.jsx(u,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>P(!h),children:h?e.jsx(A,{className:"h-4 w-4"}):e.jsx(C,{className:"h-4 w-4"})})]})}),e.jsx(m,{})]})}),e.jsx(o,{control:r.control,name:"confirmPassword",render:({field:s})=>e.jsxs(l,{children:[e.jsx(i,{children:a.confirmPassword}),e.jsx(c,{children:e.jsxs("div",{className:"relative",children:[e.jsx(b,{className:"absolute left-3 top-3 h-4 w-4 text-slate-400"}),e.jsx(d,{...s,type:"password",className:"pl-10",placeholder:"••••••••"})]})}),e.jsx(m,{})]})}),e.jsx(u,{type:"submit",className:"w-full",disabled:N.isPending,children:N.isPending?a.loading:a.registerButton})]})}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx(u,{variant:"link",onClick:()=>S(n==="login"?"register":"login"),className:"text-sm",children:n==="login"?e.jsxs(e.Fragment,{children:[a.noAccount," ",e.jsx("span",{className:"text-blue-600 ml-1",children:a.signUp})]}):e.jsxs(e.Fragment,{children:[a.haveAccount," ",e.jsx("span",{className:"text-blue-600 ml-1",children:a.signInButton})]})})})]})})]})]})}export{pe as default};
