import{c as W,j as e,r as b,g as H,u as X,h as J,B as l,L as N,C as n,e as r,b as x,d as h,i as Z,f as ee}from"./index-DKjY2bf7.js";import{u as se,T as te}from"./useAuth-CEy9htx0.js";import{u as f}from"./useQuery-BsWs2ImH.js";import{u as ae}from"./index-mrbeaKlW.js";import{u as le,t as ie}from"./index-C2yVVeig.js";import{I as q}from"./input-DYYZNWvm.js";import{D as ne,d as re,a as ce,b as de,c as oe,T as me}from"./dialog-R2njR3Od.js";import{B as F}from"./badge-BeGd1LWI.js";import{T as xe,a as he,b as v,c as w}from"./tabs-C87TBKTo.js";import{F as je,a as k,b as C,c as A,d as L,e as S}from"./form-CkwWxgZr.js";import{S as ue,a as pe}from"./schema-DLoX0Or3.js";import{B as T}from"./book-open-BpKVCv7e.js";import{G as be}from"./globe-roznitLF.js";import{U as ge}from"./user-EK2jTh-O.js";import{S as z}from"./smartphone-CB4ofv82.js";import{H as Ne,C as fe,P as M}from"./plus-CIi0cjsf.js";import{L as ve}from"./log-out-D3bGddQW.js";import{M as B}from"./message-square-ct9yul1x.js";import{C as D}from"./calendar-DAaGPcA1.js";import{C as we}from"./clock-Dggn2p4g.js";import{C as ye}from"./circle-alert-DhP7IMtQ.js";import{R as ke,L as Ce,C as Ae,X as Le,Y as Se,T as Te,a as De}from"./LineChart-DNN1pS9a.js";import"./utils-km2FGkQ4.js";import"./label-BMsvFg_p.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=W("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);function Pe(t){return/^401: .*Unauthorized/.test(t.message)}function Qe({children:t}){const[d,j]=b.useState("en"),c=a=>Z[d][a]||a;return e.jsx(H.Provider,{value:{language:d,setLanguage:j,t:c},children:t})}function qe(){const{user:t,isAuthenticated:d,isLoading:j}=se(),{t:c,language:a,setLanguage:O}=b.useContext(H),{toast:u}=X(),[U,$]=b.useState("homework"),[E,g]=b.useState(!1),K=J(),{data:o=[],isLoading:G}=f({queryKey:["/api/homework/student",t==null?void 0:t.id],enabled:!!t&&!!t.id,retry:!1}),{data:p=[],isLoading:R}=f({queryKey:["/api/questions/student",t==null?void 0:t.id],enabled:!!t&&!!t.id,retry:!1}),{data:P=[],isLoading:I}=f({queryKey:["/api/progress/student",t==null?void 0:t.id],enabled:!!t&&!!t.id,retry:!1}),{data:Q=[],isLoading:_}=f({queryKey:["/api/availability"],enabled:!!t,retry:!1}),m=le({resolver:ie(pe),defaultValues:{subject:"",title:"",content:"",priority:"medium"}}),y=ae({mutationFn:async s=>(await ee("POST","/api/questions",s)).json(),onSuccess:()=>{K.invalidateQueries({queryKey:["/api/questions/student",t==null?void 0:t.id]}),g(!1),m.reset(),u({title:"Question submitted!",description:"Your question has been sent to your tutor."})},onError:s=>{if(Pe(s)){u({title:"Unauthorized",description:"You are logged out. Logging in again...",variant:"destructive"}),setTimeout(()=>{window.location.href="/api/login"},500);return}u({title:"Error",description:"Failed to submit question. Please try again.",variant:"destructive"})}}),V=s=>{y.mutate(s)};return b.useEffect(()=>{if(!j&&!d){u({title:"Unauthorized",description:"You are logged out. Logging in again...",variant:"destructive"}),setTimeout(()=>{window.location.href="/api/login"},500);return}},[d,j,u]),j?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600",children:"Loading..."})]})}):d?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50",children:[e.jsx("header",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(N,{href:"/",children:e.jsxs("div",{className:"text-2xl font-bold text-blue-600 flex items-center cursor-pointer",children:[e.jsx(T,{className:"w-8 h-8 mr-2"}),"LukaMath"]})}),e.jsx("span",{className:"ml-4 text-slate-500",children:a==="en"?"Student Portal":"Studentski portal"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(l,{variant:"ghost",size:"sm",onClick:()=>O(a==="en"?"hr":"en"),className:"text-slate-600 hover:text-blue-600",children:[e.jsx(be,{className:"w-4 h-4 mr-1"}),a==="en"?"HR":"EN"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-slate-600",children:[e.jsx(ge,{className:"w-4 h-4"}),e.jsx("span",{children:(t==null?void 0:t.firstName)||(t==null?void 0:t.email)||"Student"})]}),e.jsx(N,{href:"/pwa",children:e.jsxs(l,{variant:"outline",size:"sm",className:"bg-blue-50 border-blue-200 text-blue-700 hover:bg-blue-100",children:[e.jsx(z,{className:"w-4 h-4 mr-1"}),a==="en"?"Mobile App":"Mobilna aplikacija"]})}),e.jsx(N,{href:"/",children:e.jsxs(l,{variant:"outline",size:"sm",children:[e.jsx(Ne,{className:"w-4 h-4 mr-1"}),a==="en"?"Home":"Početna"]})}),e.jsx("a",{href:"/api/logout",children:e.jsxs(l,{variant:"ghost",size:"sm",children:[e.jsx(ve,{className:"w-4 h-4 mr-1"}),a==="en"?"Logout":c("app.logout")]})})]})]})]})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:a==="en"?`Welcome back, ${(t==null?void 0:t.firstName)||"Student"}!`:`${c("app.welcome")} ${(t==null?void 0:t.firstName)||"učenik"}!`}),e.jsx("p",{className:"text-slate-600 mb-4",children:a==="en"?"Track your progress, submit homework, and ask questions.":"Pratite svoj napredak, predajte domaće zadatke i postavite pitanja."}),e.jsx("div",{className:"bg-blue-50 border border-blue-100 rounded-md p-3 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-blue-500 p-1.5 rounded-md mr-2",children:e.jsx(z,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-slate-700",children:a==="en"?"Try our Mobile App":"Probajte našu mobilnu aplikaciju"}),e.jsx("p",{className:"text-xs text-slate-500",children:a==="en"?"Better mobile experience with offline access":"Bolje mobilno iskustvo s offline pristupom"})]})]}),e.jsx(N,{href:"/pwa",children:e.jsx(l,{size:"sm",variant:"outline",className:"text-xs border-blue-200 text-blue-600 hover:bg-blue-50",children:a==="en"?"Open":"Otvori"})})]})})]}),e.jsxs(xe,{value:U,onValueChange:$,className:"space-y-6",children:[e.jsxs(he,{className:"grid w-full grid-cols-4",children:[e.jsxs(v,{value:"homework",className:"flex items-center space-x-2",children:[e.jsx(T,{className:"w-4 h-4"}),e.jsx("span",{children:a==="en"?"Homework":c("app.homework")})]}),e.jsxs(v,{value:"questions",className:"flex items-center space-x-2",children:[e.jsx(B,{className:"w-4 h-4"}),e.jsx("span",{children:a==="en"?"Q&A":c("app.questions")})]}),e.jsxs(v,{value:"progress",className:"flex items-center space-x-2",children:[e.jsx(Y,{className:"w-4 h-4"}),e.jsx("span",{children:a==="en"?"Progress":c("app.progress")})]}),e.jsxs(v,{value:"scheduling",className:"flex items-center space-x-2",children:[e.jsx(D,{className:"w-4 h-4"}),e.jsx("span",{children:"Scheduling"})]})]}),e.jsxs(w,{value:"homework",className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Your Homework"})}),G?e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3].map(s=>e.jsxs("div",{className:"bg-white rounded-lg p-6 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-slate-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-3 bg-slate-200 rounded w-1/2 mb-4"}),e.jsx("div",{className:"h-20 bg-slate-200 rounded"})]},s))}):o.length===0?e.jsx(n,{children:e.jsxs(r,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(T,{className:"w-12 h-12 text-slate-400 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No homework yet"}),e.jsx("p",{className:"text-slate-600 text-center",children:"Your tutor will assign homework that will appear here."})]})}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:o.map(s=>e.jsxs(n,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(x,{children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx(h,{className:"text-lg",children:s.title}),e.jsxs(F,{variant:s.status==="completed"?"default":s.status==="in_progress"?"secondary":"outline",className:s.status==="completed"?"bg-green-100 text-green-800":s.status==="in_progress"?"bg-yellow-100 text-yellow-800":"bg-slate-100 text-slate-800",children:[s.status==="completed"&&e.jsx(fe,{className:"w-3 h-3 mr-1"}),s.status==="in_progress"&&e.jsx(we,{className:"w-3 h-3 mr-1"}),s.status==="pending"&&e.jsx(ye,{className:"w-3 h-3 mr-1"}),s.status.replace("_"," ")]})]}),e.jsxs("p",{className:"text-sm text-slate-600",children:["Subject: ",s.subject]}),s.dueDate&&e.jsxs("p",{className:"text-sm text-slate-600",children:["Due: ",new Date(s.dueDate).toLocaleDateString()]})]}),e.jsxs(r,{children:[e.jsx("p",{className:"text-slate-700 mb-4",children:s.description}),s.feedback&&e.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[e.jsx("p",{className:"text-sm font-semibold text-blue-900 mb-1",children:"Feedback:"}),e.jsx("p",{className:"text-sm text-blue-800",children:s.feedback})]})]})]},s.id))})]}),e.jsxs(w,{value:"questions",className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Questions & Answers"}),e.jsxs(ne,{open:E,onOpenChange:g,children:[e.jsx(re,{asChild:!0,children:e.jsxs(l,{className:"bg-blue-600 text-white hover:bg-blue-700",children:[e.jsx(M,{className:"w-4 h-4 mr-2"}),"Ask Question"]})}),e.jsxs(ce,{className:"max-w-md",children:[e.jsx(de,{children:e.jsx(oe,{children:"Ask a Question"})}),e.jsx(je,{...m,children:e.jsxs("form",{onSubmit:m.handleSubmit(V),className:"space-y-4",children:[e.jsx(k,{control:m.control,name:"subject",render:({field:s})=>e.jsxs(C,{children:[e.jsx(A,{children:"Subject"}),e.jsx(L,{children:e.jsx(q,{placeholder:"e.g., Algebra, Calculus",...s})}),e.jsx(S,{})]})}),e.jsx(k,{control:m.control,name:"title",render:({field:s})=>e.jsxs(C,{children:[e.jsx(A,{children:"Question Title"}),e.jsx(L,{children:e.jsx(q,{placeholder:"Brief description of your question",...s})}),e.jsx(S,{})]})}),e.jsx(k,{control:m.control,name:"content",render:({field:s})=>e.jsxs(C,{children:[e.jsx(A,{children:"Question Details"}),e.jsx(L,{children:e.jsx(me,{placeholder:"Describe your question in detail...",className:"min-h-[100px]",...s})}),e.jsx(S,{})]})}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(l,{type:"button",variant:"outline",onClick:()=>g(!1),children:"Cancel"}),e.jsx(l,{type:"submit",disabled:y.isPending,children:y.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Submitting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ue,{className:"w-4 h-4 mr-2"}),"Submit Question"]})})]})]})})]})]})]}),R?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(s=>e.jsxs("div",{className:"bg-white rounded-lg p-6 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-slate-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-20 bg-slate-200 rounded mb-4"}),e.jsx("div",{className:"h-16 bg-slate-200 rounded"})]},s))}):p.length===0?e.jsx(n,{children:e.jsxs(r,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(B,{className:"w-12 h-12 text-slate-400 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No questions yet"}),e.jsx("p",{className:"text-slate-600 text-center mb-6",children:"Start by asking your first question to get personalized help."}),e.jsxs(l,{onClick:()=>g(!0),className:"bg-blue-600 text-white hover:bg-blue-700",children:[e.jsx(M,{className:"w-4 h-4 mr-2"}),"Ask Your First Question"]})]})}):e.jsx("div",{className:"space-y-4",children:p.map(s=>e.jsxs(n,{children:[e.jsxs(x,{children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx(h,{className:"text-lg",children:s.subject}),e.jsx(F,{variant:s.isAnswered?"default":"secondary",children:s.isAnswered?"Answered":"Pending"})]}),e.jsxs("p",{className:"text-sm text-slate-500",children:["Asked on ",new Date(s.createdAt).toLocaleDateString()]})]}),e.jsxs(r,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 mb-2",children:"Your Question:"}),e.jsx("p",{className:"text-slate-700",children:s.content})]}),s.isAnswered&&s.answer&&e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-green-900 mb-2",children:"Answer:"}),e.jsx("p",{className:"text-green-800",children:s.answer}),s.answeredAt&&e.jsxs("p",{className:"text-sm text-green-600 mt-2",children:["Answered on ",new Date(s.answeredAt).toLocaleDateString()]})]})]})]},s.id))})]}),e.jsxs(w,{value:"progress",className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Your Progress"}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(n,{children:[e.jsx(x,{children:e.jsx(h,{children:"Homework Statistics"})}),e.jsx(r,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600",children:"Total Assignments:"}),e.jsx("span",{className:"font-semibold",children:o.length})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600",children:"Completed:"}),e.jsx("span",{className:"font-semibold text-green-600",children:o.filter(s=>s.status==="completed").length})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600",children:"In Progress:"}),e.jsx("span",{className:"font-semibold text-yellow-600",children:o.filter(s=>s.status==="in_progress").length})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600",children:"Pending:"}),e.jsx("span",{className:"font-semibold text-slate-600",children:o.filter(s=>s.status==="pending").length})]})]})})]}),e.jsxs(n,{children:[e.jsx(x,{children:e.jsx(h,{children:"Q&A Activity"})}),e.jsx(r,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600",children:"Total Questions:"}),e.jsx("span",{className:"font-semibold",children:p.length})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600",children:"Answered:"}),e.jsx("span",{className:"font-semibold text-green-600",children:p.filter(s=>s.isAnswered).length})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600",children:"Pending:"}),e.jsx("span",{className:"font-semibold text-yellow-600",children:p.filter(s=>!s.isAnswered).length})]})]})})]})]}),e.jsxs(n,{children:[e.jsx(x,{children:e.jsxs(h,{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"w-5 h-5"}),e.jsx("span",{children:"Grade Progress"})]})}),e.jsx(r,{children:I?e.jsx("div",{className:"h-64 bg-slate-200 animate-pulse rounded"}):P.length===0?e.jsx("div",{className:"h-64 flex items-center justify-center text-slate-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Y,{className:"w-12 h-12 mx-auto mb-4 text-slate-400"}),e.jsx("p",{children:"No completed assignments yet"}),e.jsx("p",{className:"text-sm",children:"Complete homework to track your progress"})]})}):e.jsx("div",{className:"h-64",children:e.jsx(ke,{width:"100%",height:"100%",children:e.jsxs(Ce,{data:P.map((s,i)=>({assignment:i+1,grade:s.grade||0,subject:s.subject,title:s.title})),children:[e.jsx(Ae,{strokeDasharray:"3 3"}),e.jsx(Le,{dataKey:"assignment",label:{value:"Assignment #",position:"insideBottom",offset:-10}}),e.jsx(Se,{domain:[0,100],label:{value:"Grade",angle:-90,position:"insideLeft"}}),e.jsx(Te,{formatter:(s,i,Fe)=>[`${s}%`,"Grade"],labelFormatter:(s,i)=>i&&i[0]?`${i[0].payload.title} (${i[0].payload.subject})`:`Assignment ${s}`}),e.jsx(De,{type:"monotone",dataKey:"grade",stroke:"#2563eb",strokeWidth:3,dot:{fill:"#2563eb",strokeWidth:2,r:6},activeDot:{r:8,stroke:"#2563eb",strokeWidth:2}})]})})})})]})]}),e.jsxs(w,{value:"scheduling",className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Schedule a Session"}),e.jsxs(n,{children:[e.jsx(x,{children:e.jsxs(h,{className:"flex items-center space-x-2",children:[e.jsx(D,{className:"w-5 h-5"}),e.jsx("span",{children:"Luka's Availability"})]})}),e.jsx(r,{children:_?e.jsx("div",{className:"h-64 bg-slate-200 animate-pulse rounded"}):Q.length===0?e.jsx("div",{className:"h-64 flex items-center justify-center text-slate-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx(D,{className:"w-12 h-12 mx-auto mb-4 text-slate-400"}),e.jsx("p",{children:"No availability scheduled yet"}),e.jsx("p",{className:"text-sm",children:"Check back later for available time slots"})]})}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-slate-600 mb-4",children:"Available time slots for tutoring sessions:"}),e.jsx("div",{className:"grid gap-3",children:Q.map((s,i)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900",children:new Date(s.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),e.jsxs("p",{className:"text-sm text-slate-600",children:[s.startTime," - ",s.endTime]})]})]}),e.jsx(l,{size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white hover:scale-105 transition-transform",children:"Book Session"})]},i))})]})})]})]})]})]})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Authentication Required"}),e.jsx("p",{className:"text-slate-600 mb-6",children:"Please log in to access the student portal."}),e.jsx("a",{href:"/api/login",children:e.jsx(l,{className:"bg-blue-600 text-white hover:bg-blue-700",children:"Login"})})]})})}function is(){return e.jsx(Qe,{children:e.jsx(qe,{})})}export{is as default};
