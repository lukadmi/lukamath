import{c as L,r as y,x as H,j as e,H as P,B as n,C as r,e as i,b as p,d as g,L as o}from"./index-DKjY2bf7.js";import{B as u}from"./badge-BeGd1LWI.js";import{P as R}from"./progress-rut24ZRj.js";import{u as B,T as k}from"./useAuth-CEy9htx0.js";import{u as N}from"./useQuery-BsWs2ImH.js";import{C as S}from"./calculator-CBR4cIhQ.js";import{L as q}from"./log-out-D3bGddQW.js";import{B as w}from"./book-open-BpKVCv7e.js";import{C as $}from"./calendar-DAaGPcA1.js";import{M as O}from"./message-square-ct9yul1x.js";import"./utils-km2FGkQ4.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=L("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=L("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),E={en:{dashboard:"Dashboard",welcome:"Welcome back",homework:"Homework",progress:"Progress",messages:"Messages",schedule:"Schedule",pending:"Pending",completed:"Completed",dueToday:"Due Today",overdue:"Overdue",viewAll:"View All",noHomework:"No homework assigned yet",noMessages:"No new messages",upcomingSession:"Upcoming Session",nextSession:"Next session with Luka",today:"Today",thisWeek:"This Week",recentActivity:"Recent Activity",mathLevel:"Math Level",currentGrade:"Current Grade",completionRate:"Completion Rate",logout:"Logout",readyForMath:"Ready to tackle some math?"},hr:{dashboard:"Aplikacija",welcome:"Dobrodošli natrag",homework:"Domaća zadaća",progress:"Napredak",messages:"Poruke",schedule:"Termini",pending:"Na čekanju",completed:"Završeno",dueToday:"Dospijeva danas",overdue:"Zakasnilo",viewAll:"Pogledaj sve",noHomework:"Još nema dodijeljene domaće zadaće",noMessages:"Nema novih poruka",upcomingSession:"Nadolazeća sesija",nextSession:"Sljedeća sesija s Lukom",today:"Danas",thisWeek:"Ovaj tjedan",recentActivity:"Nedavna aktivnost",mathLevel:"Razina matematike",currentGrade:"Trenutna ocjena",completionRate:"Stopa završetka",logout:"Odjavi se",readyForMath:"Spremni za matematiku?"}};function ee(){var b;const[l,D]=y.useState("en"),{user:s,isAuthenticated:m}=B(),[,v]=H();y.useEffect(()=>{if(!m){v("/pwa/auth");return}const h=new URLSearchParams(window.location.search).get("lang"),j=localStorage.getItem("pwa-language");D(h||j||"en")},[m,v]);const{data:x=[]}=N({queryKey:["/api/homework",s==null?void 0:s.id],enabled:!!(s!=null&&s.id)}),{data:C=[]}=N({queryKey:["/api/messages",s==null?void 0:s.id],enabled:!!(s!=null&&s.id)}),{data:M=[]}=N({queryKey:["/api/tutoring-sessions",s==null?void 0:s.id],enabled:!!(s!=null&&s.id)}),a=E[l],A=x.filter(t=>t.status==="pending"),T=x.filter(t=>t.status==="completed"),f=x.filter(t=>{const h=new Date(t.dueDate),j=new Date;return h.toDateString()===j.toDateString()}),c=C.filter(t=>!t.read),d=M.find(t=>new Date(t.date)>new Date),z=()=>{localStorage.removeItem("pwa-language"),window.location.href="/api/logout"};return m?e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsxs(P,{children:[e.jsxs("title",{children:[a.dashboard," - LukaMath Student App"]}),e.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"}),e.jsx("meta",{name:"apple-mobile-web-app-capable",content:"yes"})]}),e.jsx("header",{className:"bg-white shadow-sm border-b sticky top-0 z-50",children:e.jsx("div",{className:"max-w-md mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(S,{className:"w-6 h-6 text-blue-600 mr-2"}),e.jsx("h1",{className:"text-xl font-bold text-slate-800",children:"LukaMath"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(n,{variant:"ghost",size:"sm",className:"relative",children:[e.jsx(W,{className:"w-5 h-5"}),c.length>0&&e.jsx(u,{className:"absolute -top-1 -right-1 h-5 w-5 rounded-full p-0 text-xs",children:c.length})]}),e.jsx(n,{variant:"ghost",size:"sm",onClick:z,children:e.jsx(q,{className:"w-5 h-5"})})]})]})})}),e.jsxs("main",{className:"max-w-md mx-auto px-4 py-6 space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-800 mb-1",children:[a.welcome,", ",((b=s==null?void 0:s.name)==null?void 0:b.split(" ")[0])||"Student","!"]}),e.jsx("p",{className:"text-slate-600",children:a.readyForMath})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(r,{children:e.jsxs(i,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:A.length}),e.jsx("div",{className:"text-sm text-slate-600",children:a.pending})]})}),e.jsx(r,{children:e.jsxs(i,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:T.length}),e.jsx("div",{className:"text-sm text-slate-600",children:a.completed})]})})]}),e.jsxs(r,{children:[e.jsx(p,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(g,{className:"text-lg",children:a.dueToday}),e.jsx(o,{href:`/pwa/homework?lang=${l}`,children:e.jsx(n,{variant:"ghost",size:"sm",children:a.viewAll})})]})}),e.jsx(i,{children:f.length===0?e.jsxs("div",{className:"text-center py-4",children:[e.jsx(w,{className:"w-8 h-8 text-slate-400 mx-auto mb-2"}),e.jsx("p",{className:"text-slate-500 text-sm",children:a.noHomework})]}):e.jsx("div",{className:"space-y-3",children:f.slice(0,3).map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-slate-800",children:t.title}),e.jsx("p",{className:"text-sm text-slate-600",children:t.subject})]}),e.jsx(G,{className:"w-5 h-5 text-slate-400"})]},t.id))})})]}),d&&e.jsxs(r,{children:[e.jsx(p,{className:"pb-3",children:e.jsxs(g,{className:"text-lg flex items-center",children:[e.jsx($,{className:"w-5 h-5 mr-2"}),a.upcomingSession]})}),e.jsx(i,{children:e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-800",children:a.nextSession}),e.jsxs("p",{className:"text-sm text-slate-600",children:[new Date(d.date).toLocaleDateString()," at ",new Date(d.date).toLocaleTimeString()]})]}),e.jsx("div",{className:"text-right",children:e.jsx(u,{className:"bg-blue-600",children:d.subject})})]})})})]}),e.jsxs(r,{children:[e.jsx(p,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(g,{className:"text-lg",children:a.progress}),e.jsx(o,{href:`/pwa/progress?lang=${l}`,children:e.jsx(n,{variant:"ghost",size:"sm",children:a.viewAll})})]})}),e.jsxs(i,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{children:a.completionRate}),e.jsx("span",{children:"85%"})]}),e.jsx(R,{value:85,className:"h-2"})]}),e.jsx("div",{children:e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{children:a.currentGrade}),e.jsx("span",{className:"font-semibold text-green-600",children:"B+"})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(o,{href:`/pwa/homework?lang=${l}`,children:e.jsx(r,{className:"cursor-pointer hover:shadow-md transition-shadow",children:e.jsxs(i,{className:"p-4 text-center",children:[e.jsx(w,{className:"w-8 h-8 text-blue-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium text-slate-800",children:a.homework})]})})}),e.jsx(o,{href:`/pwa/progress?lang=${l}`,children:e.jsx(r,{className:"cursor-pointer hover:shadow-md transition-shadow",children:e.jsxs(i,{className:"p-4 text-center",children:[e.jsx(k,{className:"w-8 h-8 text-emerald-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium text-slate-800",children:a.progress})]})})})]})]}),e.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200",children:e.jsx("div",{className:"max-w-md mx-auto",children:e.jsxs("div",{className:"grid grid-cols-4 gap-1",children:[e.jsx(o,{href:`/pwa/dashboard?lang=${l}`,children:e.jsxs(n,{variant:"ghost",className:"h-16 flex-col space-y-1 rounded-none",children:[e.jsx(S,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs",children:a.dashboard})]})}),e.jsx(o,{href:`/pwa/homework?lang=${l}`,children:e.jsxs(n,{variant:"ghost",className:"h-16 flex-col space-y-1 rounded-none",children:[e.jsx(w,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs",children:a.homework})]})}),e.jsx(o,{href:`/pwa/progress?lang=${l}`,children:e.jsxs(n,{variant:"ghost",className:"h-16 flex-col space-y-1 rounded-none",children:[e.jsx(k,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs",children:a.progress})]})}),e.jsxs(n,{variant:"ghost",className:"h-16 flex-col space-y-1 rounded-none",children:[e.jsx(O,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs",children:a.messages}),c.length>0&&e.jsx(u,{className:"absolute top-2 right-2 h-4 w-4 rounded-full p-0 text-xs",children:c.length})]})]})})}),e.jsx("div",{className:"h-16"})]}):null}export{ee as default};
