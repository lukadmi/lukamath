import{r as j,x as B,u as R,h as q,j as e,H as U,L as p,B as l,C as b,b as g,d as N,e as f,f as W}from"./index-DKjY2bf7.js";import{B as w}from"./badge-BeGd1LWI.js";import{T as G,a as I,b as v,c as k}from"./tabs-C87TBKTo.js";import{u as Q,T as V}from"./useAuth-CEy9htx0.js";import{u as Z}from"./useQuery-BsWs2ImH.js";import{u as $}from"./index-mrbeaKlW.js";import{A as K}from"./arrow-left-BWIihaGN.js";import{B as D}from"./book-open-BpKVCv7e.js";import{C as y}from"./calendar-DAaGPcA1.js";import{C as S}from"./circle-check-big-bNxX-UPb.js";import{C}from"./circle-alert-DhP7IMtQ.js";import{C as Y}from"./calculator-CBR4cIhQ.js";import{M as J}from"./message-square-ct9yul1x.js";import{C as X}from"./clock-Dggn2p4g.js";import"./utils-km2FGkQ4.js";const _={en:{homework:"Homework",pending:"Pending",completed:"Completed",overdue:"Overdue",dueDate:"Due Date",subject:"Subject",instructions:"Instructions",attachments:"Attachments",submit:"Submit",submitted:"Submitted",grade:"Grade",feedback:"Feedback",viewDetails:"View Details",markComplete:"Mark as Complete",downloadFile:"Download File",uploadFile:"Upload File",noHomework:"No homework found",submitSuccess:"Homework submitted successfully!",today:"Today",tomorrow:"Tomorrow",thisWeek:"This week",pastDue:"Past due",dashboard:"Dashboard",progress:"Progress",messages:"Messages",submittedForReview:"Your homework has been submitted for review.",submitError:"Failed to submit homework. Please try again.",error:"Error",submittedOn:"Submitted on"},hr:{homework:"Domaća zadaća",pending:"Na čekanju",completed:"Završeno",overdue:"Zakasnilo",dueDate:"Datum dospijeća",subject:"Predmet",instructions:"Upute",attachments:"Prilozi",submit:"Predaj",submitted:"Predano",grade:"Ocjena",feedback:"Povratne informacije",viewDetails:"Pogledaj detalje",markComplete:"Označi kao završeno",downloadFile:"Preuzmi datoteku",uploadFile:"Učitaj datoteku",noHomework:"Nema domaće zadaće",submitSuccess:"Domaća zadaća je uspješno predana!",today:"Danas",tomorrow:"Sutra",thisWeek:"Ovaj tjedan",pastDue:"Zakasnilo",dashboard:"Aplikacija",progress:"Napredak",messages:"Poruke",submittedForReview:"Vaša domaća zadaća je predana na pregled.",submitError:"Greška pri predavanju domaće zadaće. Molimo pokušajte ponovo.",error:"Greška",submittedOn:"Predano"}};function ge(){const[n,L]=j.useState("en"),[ee,z]=j.useState(null),{user:i,isAuthenticated:d}=Q(),[,P]=B(),{toast:T}=R(),F=q();j.useEffect(()=>{if(!d){P("/pwa/auth");return}const t=new URLSearchParams(window.location.search).get("lang"),r=localStorage.getItem("pwa-language");L(t||r||"en")},[d,P]);const{data:m=[],isLoading:se}=Z({queryKey:["/api/homework",i==null?void 0:i.id],enabled:!!(i!=null&&i.id)}),o=$({mutationFn:async s=>(await W("POST","/api/homework/submit",s)).json(),onSuccess:()=>{T({title:a.submitSuccess,description:a.submittedForReview}),F.invalidateQueries({queryKey:["/api/homework"]}),z(null)},onError:()=>{T({title:a.error,description:a.submitError,variant:"destructive"})}}),a=_[n],c=m.filter(s=>s.status==="pending"),x=m.filter(s=>s.status==="completed"),u=m.filter(s=>new Date(s.dueDate)<new Date&&s.status==="pending"),A=s=>{const t=new Date(s),r=new Date,h=new Date(r);if(h.setDate(h.getDate()+1),t.toDateString()===r.toDateString())return a.today;if(t.toDateString()===h.toDateString())return a.tomorrow;if(t<r)return a.pastDue;const E=t.getTime()-r.getTime();return Math.ceil(E/(1e3*60*60*24))<=7?a.thisWeek:t.toLocaleDateString()},M=(s,t)=>s==="completed"?"bg-emerald-100 text-emerald-800":new Date(t)<new Date?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800",O=(s,t)=>s==="completed"?e.jsx(S,{className:"w-4 h-4"}):new Date(t)<new Date?e.jsx(C,{className:"w-4 h-4"}):e.jsx(X,{className:"w-4 h-4"}),H=s=>{o.mutate({homeworkId:s,submission:"Student submission content"})};return d?e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsxs(U,{children:[e.jsxs("title",{children:[a.homework," - LukaMath Student App"]}),e.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"}),e.jsx("meta",{name:"apple-mobile-web-app-capable",content:"yes"})]}),e.jsx("header",{className:"bg-white shadow-sm border-b sticky top-0 z-50",children:e.jsx("div",{className:"max-w-md mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(p,{href:`/pwa/dashboard?lang=${n}`,children:e.jsx(l,{variant:"ghost",size:"sm",className:"mr-3",children:e.jsx(K,{className:"w-4 h-4"})})}),e.jsx(D,{className:"w-6 h-6 text-blue-600 mr-2"}),e.jsx("h1",{className:"text-xl font-bold text-slate-800",children:a.homework})]})})}),e.jsx("main",{className:"max-w-md mx-auto px-4 py-6",children:e.jsxs(G,{defaultValue:"pending",className:"w-full",children:[e.jsxs(I,{className:"grid w-full grid-cols-3",children:[e.jsxs(v,{value:"pending",className:"text-xs",children:[a.pending," (",c.length,")"]}),e.jsxs(v,{value:"completed",className:"text-xs",children:[a.completed," (",x.length,")"]}),e.jsxs(v,{value:"overdue",className:"text-xs",children:[a.overdue," (",u.length,")"]})]}),e.jsx(k,{value:"pending",className:"mt-6",children:e.jsx("div",{className:"space-y-4",children:c.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(D,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-500",children:a.noHomework})]}):c.map(s=>e.jsxs(b,{className:"cursor-pointer hover:shadow-md transition-shadow",children:[e.jsx(g,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(N,{className:"text-lg text-slate-800",children:s.title}),e.jsx("p",{className:"text-sm text-slate-600 mt-1",children:s.subject})]}),e.jsxs(w,{className:M(s.status,s.dueDate),children:[O(s.status,s.dueDate),e.jsx("span",{className:"ml-1",children:A(s.dueDate)})]})]})}),e.jsxs(f,{children:[e.jsx("p",{className:"text-sm text-slate-700 mb-4",children:s.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center text-sm text-slate-500",children:[e.jsx(y,{className:"w-4 h-4 mr-1"}),new Date(s.dueDate).toLocaleDateString()]}),e.jsx(l,{size:"sm",onClick:()=>H(s.id),disabled:o.isPending,children:o.isPending?"Submitting...":a.submit})]})]})]},s.id))})}),e.jsx(k,{value:"completed",className:"mt-6",children:e.jsx("div",{className:"space-y-4",children:x.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(S,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-500",children:a.noHomework})]}):x.map(s=>e.jsxs(b,{children:[e.jsx(g,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(N,{className:"text-lg text-slate-800",children:s.title}),e.jsx("p",{className:"text-sm text-slate-600 mt-1",children:s.subject})]}),e.jsxs(w,{className:"bg-emerald-100 text-emerald-800",children:[e.jsx(S,{className:"w-4 h-4 mr-1"}),a.completed]})]})}),e.jsxs(f,{children:[e.jsx("p",{className:"text-sm text-slate-700 mb-4",children:s.description}),s.grade&&e.jsxs("div",{className:"bg-emerald-50 p-3 rounded-lg mb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium text-emerald-800",children:[a.grade,":"]}),e.jsx("span",{className:"text-lg font-bold text-emerald-600",children:s.grade})]}),s.feedback&&e.jsx("p",{className:"text-sm text-emerald-700 mt-2",children:s.feedback})]}),e.jsxs("div",{className:"flex items-center text-sm text-slate-500",children:[e.jsx(y,{className:"w-4 h-4 mr-1"}),a.submittedOn," ",new Date(s.submittedAt).toLocaleDateString()]})]})]},s.id))})}),e.jsx(k,{value:"overdue",className:"mt-6",children:e.jsx("div",{className:"space-y-4",children:u.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(C,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-500",children:a.noHomework})]}):u.map(s=>e.jsxs(b,{className:"border-red-200",children:[e.jsx(g,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(N,{className:"text-lg text-slate-800",children:s.title}),e.jsx("p",{className:"text-sm text-slate-600 mt-1",children:s.subject})]}),e.jsxs(w,{className:"bg-red-100 text-red-800",children:[e.jsx(C,{className:"w-4 h-4 mr-1"}),a.overdue]})]})}),e.jsxs(f,{children:[e.jsx("p",{className:"text-sm text-slate-700 mb-4",children:s.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center text-sm text-red-600",children:[e.jsx(y,{className:"w-4 h-4 mr-1"}),n==="en"?"Was due":"Trebalo do"," ",new Date(s.dueDate).toLocaleDateString()]}),e.jsx(l,{size:"sm",variant:"destructive",onClick:()=>H(s.id),disabled:o.isPending,children:o.isPending?"Submitting...":a.submit})]})]})]},s.id))})})]})}),e.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200",children:e.jsx("div",{className:"max-w-md mx-auto",children:e.jsxs("div",{className:"grid grid-cols-4 gap-1",children:[e.jsx(p,{href:`/pwa/dashboard?lang=${n}`,children:e.jsxs(l,{variant:"ghost",className:"h-16 flex-col space-y-1 rounded-none",children:[e.jsx(Y,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs",children:a.dashboard})]})}),e.jsxs(l,{variant:"ghost",className:"h-16 flex-col space-y-1 rounded-none bg-blue-50",children:[e.jsx(D,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"text-xs text-blue-600",children:a.homework})]}),e.jsx(p,{href:`/pwa/progress?lang=${n}`,children:e.jsxs(l,{variant:"ghost",className:"h-16 flex-col space-y-1 rounded-none",children:[e.jsx(V,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs",children:a.progress})]})}),e.jsxs(l,{variant:"ghost",className:"h-16 flex-col space-y-1 rounded-none",children:[e.jsx(J,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs",children:a.messages})]})]})})}),e.jsx("div",{className:"h-16"})]}):null}export{ge as default};
